<!doctype html>
<html>
  <head>
    <title>Multinucleo</title>
  </head>
  <body>
    <canvas></canvas>
    <script>
      let lienzo = document.querySelector("canvas");
      lienzo.width = 4000;
      lienzo.height = 6000;
      let contexto = lienzo.getContext("2d");
      
      let imagen = new Image()
      imagen.src = "josevicente.jpg";
      
      imagen.onload = function(){
        let trabajador1 = new Worker("procesaimagen.js");
        let trabajador2 = new Worker("procesaimagen.js");
        let trabajador3 = new Worker("procesaimagen.js");
        let trabajador4 = new Worker("procesaimagen.js");
        let trabajador5 = new Worker("procesaimagen.js");
        let trabajador6 = new Worker("procesaimagen.js");
        
        
      
      
        contexto.drawImage(imagen,0,0);
        for(let x = 0;x<4000;x++){
          for(let y = 0;y<6000;y++){
            let pixel = contexto.getImageData(x,y,1,1); // Primer pixel
            pixel.data[0] = Math.round(Math.random()*255)
            pixel.data[1] = Math.round(Math.random()*255)
            pixel.data[2] = Math.round(Math.random()*255)
            pixel.data[3] = 255
            contexto.putImageData(pixel,x,y)
          }
        }
        
      }
      
    </script>
  </body>
</html>
